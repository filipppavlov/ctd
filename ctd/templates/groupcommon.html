{% macro group_header(group, type) %}
<script language="JavaScript">
function filterDate(period, element)
{
    var date = new Date();
    date = date.valueOf() - period;
    var hidables = $(".dateFilterable").each(function() {
        if (new Date($(this).data('modified')).valueOf() > date) {
            $(this).show();
        }
        else {
            $(this).hide();
        }
    });
    $('#timeFilter').find('li').removeClass('active');
    $(element).parent().addClass('active');
}

$(document).ready(function(){
    lastCommitResultIcon($('#titleSuccess'), "{{ get_last_commit_result(group) }}");
    $('#settings-btn').button().click(function() { comparisonSettings($('#settings'), '{{ group.path }}'); });
    $('#observers-btn').button().click(function() { observerSettings($('#observers'), '{{ group.path }}'); });
    //$('#timeFilter').buttonset();
    $('#compare').change(function () {
        if (this.selectedIndex != 0)
            location.href = '/groupcompare?group1={{ group.path }}&group2=' + this.value;
    });
});
</script>
<div class="btn-toolbar" role="toolbar" style="float: right">
    <div class="btn-group">
        <a href="{{ url_for('gallery', path=group.path) }}" id="galleryLink" title="Show gallery" class="btn btn-primary {% if type=='gallery' %} active{% endif %}">Gallery</a>
        <a href="{{ url_for('group', path=group.path) }}" id="treeLink" title="Show tree view" class="btn btn-primary {% if type!='gallery' %} active{% endif %}">Tree</a>
    </div>
    <div class="btn-group">
        <label>
            <select id="compare" class="form-control">
                <option>Compare with</option>
                {% for each in get_equivalent_groups(group) %}
                <option>{{ each.path }}</option>
                {% endfor %}
            </select>
        </label>
    </div>
    <div class="btn-group">
        <a id="settings-btn" class="btn btn-primary">Settings</a>
        <a id="observers-btn" class="btn btn-primary">Observers</a>
    </div>
</div>
<h2>
    <span id="titleSuccess"></span>
    {% if group.path=='' %}
    &lt;root&gt;
    {% else %}
    {{ group.path }}
    {% endif %}
</h2>
<ul class="nav nav-tabs" role="tablist" id="timeFilter" style="clear: right; float: right; width: 100%">
    <li class="active"><a href="javascript:void(0)" onclick="filterDate(1000 * 365 * 24 * 60 * 60 * 1000, this)">all time</a></li>
    <li><a href="javascript:void(0)" onclick="filterDate(365 * 24 * 60 * 60 * 1000, this)">1 year</a></li>
    <li><a href="javascript:void(0)" onclick="filterDate(30 * 24 * 60 * 60 * 1000, this)">1 month</a></li>
    <li><a href="javascript:void(0)" onclick="filterDate(7 * 24 * 60 * 60 * 1000, this)">1 week</a></li>
    <li><a href="javascript:void(0)" onclick="filterDate(24 * 60 * 60 * 1000, this)">1 day</a></li>
</ul>
    <div class="modal fade" id="settings" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title" id="myModalLabel">Settings</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div>
        </div>
      </div>
    </div>
    <div class="modal fade" id="observers" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <h4 class="modal-title" id="myModalLabel">Observers</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
{% endmacro %}
